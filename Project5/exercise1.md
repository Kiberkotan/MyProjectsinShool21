# Задание №1. MPA, SPA, PWA
Существует три основных подхода к разработке веб-приложений: одностраничные __(SPA)__, многостраничные __(MPA)__ и прогрессивные __(PWA)__. Они выделяются среди других подходов простотой разработки, удобством для пользователей и широкими возможностями для развития бизнеса.
## Одностраничные приложения
__SPA__ или __Single Page Application__ — это одностраничное веб-приложение, которое загружается на одну HTML-страницу.   Динамическое обновление содержимого страницы достигается технологией AJAX (Asynchronous JavaScript and XML, асинхронный JavaScript и XML). В ответ на действия пользователя (прокрутка страницы, нажатие кнопок, заполнение формы, движение ползунка и т.п.) содержание страницы будет меняться. На практике это означает, что пользователь видит в браузере весь основной контент, а при прокрутке или переходах на другие страницы, вместо полной перезагрузки нужные элементы просто подгружаются.  
В процессе работы пользователю может показаться, что он запустил не веб-сайт, а десктопное приложение, так как оно мгновенно реагирует на все его действия, без задержек и «подвисаний».  
Такого эффекта удается добиться с помощью продвинутых фреймворков JavaScript: Angular, React, Ember, Meteor, Knockout.  
Практически все почтовые сервисы являются SPA.
### Преимущества
•	Высокая скорость — все ресурсы загружаются за одну сессию, а во время действий на странице данные просто меняются, что очень экономит время;  
•	Гибкость и отзывчивость пользовательского интерфейса — за счет того, что веб-страница всего одна, проще построить насыщенный интерфейс, хранить сведения о сеансе, управлять состояниями представлений и анимацией;  
•	Упрощенная разработка — код можно начинать писать с файла file://URL, не используя сервер, не нужен отдельный код для рендера страницы на стороне сервера;  
•	Кэширование данных — приложение отправляет всего один запрос, собирает данные, а после этого может функционировать в offline-режиме.
### Недостатки
•	Seo оптимизация требует решений в виде серверного рендеринга — из-за того, что контент загружается при помощи технологии AJAX, которая подразумевает динамическое изменение содержания станицы, а для оптимизации важна устойчивость;  
•	Нагрузка на браузер — из-за того, что клиентские фреймворки тяжелые, они довольно долго загружаются;  
•	Необходима поддержка JavaScript — без JS нельзя полноценно пользоваться полным функционалом приложения;  
•	Утечка памяти в Java Script — из-за плохой защиты, SPA больше подвержена действиям злоумышленников и утечке памяти.
## Многостраничные приложения
__MPA__ или Multi Page Application — это многостраничные приложения, которые работают по традиционной схеме.  
Это означает, что при каждом незначительном изменении данных или загрузке новой информации страница обновляется. Такие приложения тяжелее, чем одностраничные, поэтому их использование целесообразно только в тех случаях, когда нужно отобразить большое количество контента.  
Применяются для построения сложных систем. В данном случае любые изменения в данных приводят к полной перезагрузке страницы. Когда имеется большой массив данных и контента, разнообразие представляемых сведений, MPA подходят лучше всего.
### Преимущества
•	Простая SEO оптимизация — можно оптимизировать каждую из страниц приложения под нужные ключевые запросы;  
•	Привычность для пользователей — за счет простого интерфейса и классической навигации.
### Недостатки
•	Тесная связь между бекендом и фронтендом, поэтому их не получается развивать параллельно; увеличивает сроки и бюджет разработки.  
•	Сложная разработка — требуют использования фреймворков как на стороне клиента, так и на стороне сервера, что увеличивает сроки и бюджет разработки.

Несмотря на то, что они требуют больших объемов ресурсов для реализации и существенно дороже, другие виды web-приложений их заменить не могут. Однако тенденции показывают, что общая доля MPA постепенно снижается.

## SPA и MPA. Что выбрать?
При выборе типа веб-приложения нужно ориентироваться на то, зачем именно вы его создаете. Многостраничный сайт подойдет интернет-магазину с большим количеством товаров и услуг, а если у вас, к примеру, инфобизнес, где можно изложить всю информацию в рамках сжатого веб-пространства — подойдет одностраничный сайт.
### Выбор SPA
Целесообразен, если:  
•	есть необходимость в многофункциональном, насыщенном пользовательском интерфейсе;  
•	есть необходимость в интерфейсе API — использовании готовых блоков для построения приложения.
### Выбор MPA
Целесообразен, если:  
•	приложения используются только для чтения информации;  
•	есть необходимость в использовании приложения в браузерах без поддержки JavaScript.
## PWA приложения
Прогрессивные приложения или Progressive Web Application __(PWA)__ взаимодействуют с пользователем, как приложение. Они могут устанавливаться на главный экран смартфона, отправлять push-уведомления и работать в офлайн-режиме.  
Представим ситуацию: человек посещает некоторый сайт, который предлагает ему установить его на другие устройства. Теперь и на ПК, и в телефоне вы сможете получать уведомления, работать оффлайн, независимо от модели устройств и их мощностей.

Главная область применения таких приложений – мобильные устройства. Пользователю больше не нужно входить на AppStore или PlayMarket, чтобы скачать программу – все сделает браузер автоматически (а еще создаст ярлык на рабочем столе, позволит работать с собой без доступа к сети и т.д.). Фактически, мы получаем аналог обычного приложения с тем же функционалом и множеством плюсов (для PWA не требуется лишняя память смартфона, ради которой приходится удалять фото и видео, они весят менее 1 Мб).

При появлении нового контента PWA отправляет пользователю push-уведомление. Следует признать, что в скором времени эти приложения смогут заменить практически все мобильные аналоги. Хоть технология и появилась в 2007 году в компании Apple, изначально она «не зашла» в силу слабой «прогретости» публики, зато ко второй половине 2016 года Google развил ее и сделал популярной.

PWA-версии приложений встречаются у многих компаний (тот же Aliexpress почти в 2 раза повысил конверсию от новых посетителей благодаря этому).  
Функции веб-сайта и приложения в одном флаконе. PWA можно использовать и как приложение, и как сайт. Это означает, что можно использовать все возможности браузера и устройства, на котором размещается PWA. Например, камера, push-уведомления (только на Android) или GPS. Пользователи могут открыть PWA непосредственно через URL, который содержится в SMS-сообщении, имейле или сообщении Telegram / Viber / WhatsApp.
### Преимущества
•	Кроссплатформенность — могут работать сразу с несколькими операционными системами;  
•	Высокая скорость работы и возможность запуска и отображения данных в офлайн-режиме с моментальной загрузкой;  
•	Возможность работы в фоновом режиме  
•	Высокая скорость установки на устройство;  
•	Быстрая разработка — для создания PWA, не нужен отдельный сайт, достаточно изменить уже существующий.  
•	Настройка push-уведомлений  
### Недостатки
•	Не все браузеры поддерживают основные функции таких приложений (например, Firefox и Edge).  
•	Не передаются данные на сервисы статистики в режиме offline (ну это логично);  
•	Нет поддержки в IE, Opera и других древних версиях браузеров;
 
## Примеры приложений
### Примеры MPA приложений:
Ситилинк https://www.citilink.ru/  
Яндекс маркет https://market.yandex.ru/  
Сбермегамаркет https://sbermegamarket.ru/
### Примеры SPA приложений:
Gmail https: //www.gmail.com/  
Вконтакте: https://vk.com/  
GitHub: https://github.com/
### Примеры PWA приложений
Алиэкспресс: https://aliexpress.ru/  
Старбакс: https://www.starbucks.com/  
Google.docs: https://docs.google.com/  
Фейсбук: http://facebook.com/
## Структура PWA
Чаще всего PWA состоит из:
•Service Workers,   
•	Application Manifest,   
•	Офлайн-кэширования,   
•	различных PWA-технологий,   
•	адаптивного дизайна,   
•	фоновой синхронизации,   
•	Push-уведомлений,  
•	Media API и Geolocation API,  
•	HTTPS  
Модификаций структуры множество, однако минимальные требования для работы PWA — это:  
•	Валидное и защищенное HTTPS-подключение (у домена должен быть установлен SSL-сертификат).  
•	Успешно установленный файл Service Worker`а.  
•	Правильно установленный и валидный JSON-файл манифеста.  
Любой сайт можно дополнить данными составляющими и тем самым получить прогрессивное веб-приложение.
Progressive Web Apps состоят из двух частей. Первая – оболочка, которая отображает структуру страницы. Вторая – сам контент. Для работы прогрессивного приложения необходимо четыре базовых компонента. 
### Веб-манифест
Веб-манифест – одна из прогрессивных и наиболее важных для работы приложения веб-технологий. Она представляет собой текстовый файл в формате JSON с информацией для загрузки содержимого и отображения иконки на домашнем экране. Манифест внедряется в HTML-страницу сайта в виде тега.
### Service Worker
С точки зрения веб-программирования, Service Worker – обычный файл javascript. Это самый важный элемент прогрессивной технологии, так как он отвечает за взаимодействие между клиентской и программно-аппаратной частями сервиса.   
Его можно представить как проксирующий слой, который проводит через себя все запросы браузера. У него есть доступ к кэшированным файлам и сайту, поэтому Service Worker позволяет реализовать практически любые бизнес-задачи с несложной логикой с точки зрения программирования.
### SSL сертификат
Для работы прогрессивного приложения необходимо, чтобы данные передавались по защищенному протоколу HTTPS. Для этого нужен SSL сертификат – электронный документ на сервере сайта для безопасного обмена данными между ним и браузером клиента. Платить за него не нужно.  
Важно, чтобы на сайте не было ссылок на небезопасные сайты, иначе браузер не сможет обеспечить правильное отображение. Чаще всего возникает проблема с изображениями, полученными со сторонних ресурсов. Чтобы ее избежать, необходимо сохранять картинки себе или на сервис, который работает по протоколу безопасности HTTPS.
### Application Shell
Application Shell – шаблон графического интерфейса, его статическая часть. Application Shell во многом схож с оболочкой нативного приложения: в него загружается динамическая информация при запуске приложения.

## Как распознать PWA приложения
•	Для установки PWA приложений не требуется установка из официальных магазинов Google play, App Store и др.  
•	Устанавливается из браузерной версии в один клик. gоявляется иконка на рабочем столе  
•	Поддержка HTTPS  
•	Малый вес PWA приложений  
•	Работают в онлайн и оффлайн режимах, все данные приложения хранятся в кэше браузера.  
•	Заявки можно формировать оффлайн: они отправятся автоматически при возобновления доступа в интернет  
•	Моментальная загрузка контента  
•	Настройка push-уведомлений   
•	Наличие манифеста 
## Тестирование PWA
1.	Сайт тестирования / верификации обслуживается по протоколу HTTPS.
2.	Убедитесь, что дизайн всех страниц адаптирован к планшетам и мобильным устройствам.
3.	Убедитесь, что приложение представляет некоторый контент даже в автономном режиме. Загружайте различные страницы в PWA с включенным режимом полета.
4.	Время проверки интерактивности должно составлять < 10 секунд для первого посещения в моделируемой сети 3G, т. Е. Первая загрузка должна быть быстрой даже в 3G.
5.	Протестируйте сайт в Chrome, Edge, Firefox и Safari, т.е. проведите кроссбраузерное тестирование.
6.	Переходы страниц внутри приложений в сети должны быть быстрее даже в 3G.
7.	Убедитесь, что отдельные страницы имеют глубокие ссылки по URL-адресам и что URL-адреса уникальны для целей совместного использования в социальных сетях, путем тестирования с отдельными страницами, которые можно открывать и получать к ним прямой доступ через новые окна браузера.
8.	Возможность совместного использования: Контентом должно быть легко поделиться даже в полноэкранном режиме, и он должен формировать карточки для всех платформ социальных сетей.
9.	Push-уведомления: Если push-уведомления применимы для вашего веб-приложения, они не должны быть слишком агрессивными.



## Тестирование SPA и MPA различия
Как и для всех сайтов при тестировании web-приложений проверяются:  
•	Адаптивность  
•	Кроссбраузерность  
•	Мультиязычность, при ее наличии  
•	Загрузка при различных скоростях соединения  
•	Функциональность  
•	Удобство использования  
•	Интерфейс  
•	Производительность  
•	Безопасность  


1.	Так как SPA состоит из одной страницы и все взаимодействия происходят через запросы на обновление конкретных данных, то при ручном тестировании проверяется всё, что может обновляться. В MPA приложении происходит полная перезагрузка страницы, и, соответственно, необходимо полное тестирование каждой новой страницы. Тестирование MPA более объемное, а SPA более сложное в связи с наличием динамических обновлений
2.	Тестирование SPA обязательно должно проводиться с двух сторон: клиент-сервер (Клиент-серверное взаимодействие)
3.	Приложения MPA сами по себе довольно тяжелые, поэтому при их тестировании обязательно проверяется нагрузка на сервер (производительность) и конфигурация
4.	Также стоит отметить, что при тестировании любого типа приложений сценарии и тест-кейсы необходимо разбивать на отдельные блоки. В SPA и MPA, блоки, естественно, будут отличаться. К примеру, в SPA строку поиска проверяем один раз, а в MPA на каждой странице. То же касается и навигации сайта, если в почтовом сервисе навигация всегда в одном месте, а в MPA может отличаться.   
При тестировании SPA приложений важно, чтобы обновления при запросах происходили корректно. Для этого тестируют:  
•	Корректную первоначальную загрузку всех блоков  
•	Обновление только тех блоков, в которых меняется информация  
•	Обновление данных в связанных блоках. Например, обновление счетчика непрочитанных писем при открытии письма  
•	Обработка некорректных запросов или при отсутствии интернета  
## Итог
__SPA__ и __PWA__ — это веб-сайты, которые постепенно смещают со своих позиций классические __MPA__. Так происходит из-за того, что они более простые в разработке, быстрее работают и нравятся пользователям.   
Однако у них есть слабое место — SEO-оптимизация. Пока еще не все браузеры могут с ними нормально работать, поэтому, чтобы сделать такие приложения дружественными для сео, нужно прибегать к ряду ухищрений. MPA-сайты в этом плане более простые и надежные.
